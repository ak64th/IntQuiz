{% extends "layout.html" %}

{% block content %}
<section class="content-header">
  <h1>活动</h1>
</section>
<section class="content">
  <div class="row col-xs-12 col-md-6">
    <form class="form-horizontal" method="post">
      <div class="form-group">
        <label for="name" class="col-sm-2 control-label">活动名称</label>

        <div class="col-sm-10">
          <input type="text" class="form-control" id="name" name="name" placeholder="活动名称" value="{{ activity.name or '' }}">
        </div>
      </div>
      <div class="form-group">
        <label for="welcome" class="col-sm-2 control-label">活动介绍</label>

        <div class="col-sm-10">
          <textarea class="form-control textarea" rows="3" id="welcome" name="welcome" placeholder="活动介绍">{{ activity.welcome or '' }}</textarea>
        </div>
      </div>
      <div class="form-group">
        <label for="type" class="col-sm-2 control-label">活动模式</label>

        <div class="col-sm-10">
          <select class="form-control" id="type" name="type">
            {% for item in activity.TYPE_CHOICE %}
            {% if activity.type == item[0] %}
            <option value="{{item[0]}}" selected>{{item[1]}}</option>
            {% else %}
            <option value="{{item[0]}}">{{item[1]}}</option>
            {% endif %}
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="book" class="col-sm-2 control-label">题库选择</label>

        <div class="col-sm-10">
          <select class="form-control" id="book" name="book">
            {% for book in books %}
            {% if activity.book %}
            <option value="{{ book.id }}" selected="selected">{{ book.title }}</option>
            {% else %}
            <option value="{{ book.id }}">{{ book.title }}</option>
            {% endif %}
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="form-group">
        <label for="chances" class="col-sm-2 control-label">答题机会（次）</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="chances" name="chances" placeholder="答题机会（次）" value="{{ activity.chances or 1000 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="time_limit" class="col-sm-2 control-label">答题时间（秒）</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="time_limit" name="time_limit" placeholder="答题时间（秒）" value="{{ activity.time or 0 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="single" class="col-sm-2 control-label">单选题数量</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="single" name="single" placeholder="单选题数量" value="{{ activity.single or 0 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="multi" class="col-sm-2 control-label">多选题数量</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="multi" name="multi" placeholder="多选题数量" value="{{ activity.multi or 0 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="single_points" class="col-sm-2 control-label">单选题分值</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="single_points" name="single_points" placeholder="单选题分值" value="{{ activity.single_points or 0 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="multi_points" class="col-sm-2 control-label">多选题分值</label>

        <div class="col-sm-10">
          <input type="number" min="0" class="form-control" id="multi_points" name="multi_points" placeholder="多选题分值" value="{{ activity.multi_points or 0 }}">
        </div>
      </div>
      <div class="form-group">
        <label for="datetimerange" class="col-sm-2 control-label">活动时间</label>

        <div class="col-sm-10">
          <input type="datetime-local" class="form-control" id="datetimerange" name="datetimerange" placeholder="请从下拉框内选择">
        </div>
      </div>
      <h4>用户信息</h4>

      <div class="form-group">
        <label for="info_field_1" class="col-sm-2 control-label">字段1</label>

        <div class="col-sm-10">
          <input type="text" class="form-control" id="info_field_1" name="info_field_1" placeholder="字段1" value="{{ activity.info_field_1 or '' }}">
        </div>
      </div>
      <div class="form-group">
        <label for="info_field_2" class="col-sm-2 control-label">字段2</label>

        <div class="col-sm-10">
          <input type="text" class="form-control" id="info_field_2" name="info_field_2" placeholder="字段2" value="{{ activity.info_field_2 or '' }}">
        </div>
      </div>
      <div class="form-group">
        <label for="info_field_3" class="col-sm-2 control-label">字段3</label>

        <div class="col-sm-10">
          <input type="text" class="form-control" id="info_field_3" name="info_field_3" placeholder="字段3" value="{{ activity.info_field_3 or '' }}">
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <div class="checkbox">
            <label>
              {% if activity.show_answer %}
              <input type="checkbox" name="show_answer" checked="checked">
              {% else %}
              <input type="checkbox" name="show_answer">
              {% endif %}
              答题后显示正确答案
            </label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-primary">提交</button>
        </div>
      </div>
    </form>
  </div>
</section>
{% endblock %}


{% block script %}
{{ super() }}
<script>
$(function(){
  $('#datetimerange').daterangepicker({
    locale:{
      applyLabel: '应用',
      cancelLabel: '取消',
      format: 'YYYY-MM-DD HH:mm:ss'
    },
    timePicker: true,
    timePickerIncrement: 15,
    startDate: new Date('{{ activity.start_at.isoformat() }}'),
    {% if activity.end_at %}
    endDate: new Date('{{ activity.end_at.isoformat() }}')
    {% endif %}
  });
  $('textarea#welcome').wysihtml5({
    toolbar: {
      emphasis: {small:false},
      image: false,
      link: false,
      blockquote: false,
      html: true,
      'color': true,
    },
    locale: "zh-CN"
  });
});
</script>
{% endblock %}